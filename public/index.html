<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VacationGPT</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      background-color: #4caf50;
      color: white;
      text-align: center;
      padding: 20px;
      margin: 0;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    input,
    select {
      margin-bottom: 20px;
      padding: 5px;
    }

    #response-container {
      margin: 20px auto;
      max-width: 50%;
      box-sizing: border-box;
      border: 1px solid grey;
      padding: 30px;
      box-shadow: 5px 5px #BBB;
    }

    /* Mobile styles */
    @media screen and (max-width: 768px) {
      #response-container {
        max-width: 100%;
        margin-left: 1rem;
        margin-right: 1rem;
      }
    }

    .info-box {
      background-color: rgba(0, 0, 0, 0.05); /* Light transparent background */
      color: #6b6b6b; /* Dark gray text color */
      border-radius: 5px; /* Rounded corners */
      padding: 1rem; /* Padding around the content */
      font-size: small; /* Slightly smaller font size */
      line-height: 1.5; /* Increased line height for better readability */
      max-width: 80%; /* Limit the width of the box */
      margin: 2rem auto; /* Add some margin around the box and center it horizontally */
      box-sizing: border-box; /* Include padding and border in the total width */
    }

    .loader {
      display: none;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 10px auto;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <h1>VacationGPT</h1>
  <form id="vacation-form">
    <input type="text" id="name" placeholder="Name" required>
    <input type="text" id="reason" placeholder="Reason" maxlength="200" required>
    <label for="date">Vacation start date</label>
    <input type="date" id="date" required>
    <label for="days">Number of days:</label>
    <input type="number" id="days" name="days" min="1" step="1" required>
    <label for="mood">What should be the mood of the letter?</label>
    <select id="mood" required>
      <option value="Happy">Happy</option>
      <option value="Sad">Sad</option>
    </select>
    <button type="submit">Submit</button>
  </form>
  <div class="loader"></div>
  <div id="response-container">Your vacation letter will appear here.</div>
  <div class="info-box">
    VacationGPT Â© 2023 by <a href="https://blog.qburst.com/author/vishnuh/">Vishnu Haridas</a> built at <a href="https://qburst.com">QBurst</a>.<br/> 
    This website uses ChatGPT to help you write a vacation letter, based on the given parameters.
    <br/><br/>
    This website is built to experiment and showcase the code generation capabilities of ChatGPT4. 
    This website, the CSS styles, and the related Firebase Cloud Function were completely
    generated by ChatGPT4 based on the given prompts. Multiple prompts were given to generate 
    individual components and functionalities, and they were assembled in place.
    A minimal level of editing was made to tweak the appearance of the website.
    <br/><br/>
    Look at the <a href="https://github.com/vishnuharidas/vacation-gpt">source code.</a>
  </div>

  <script>
    const form = document.getElementById('vacation-form');
    const responseContainer = document.getElementById('response-container');
    const loader = document.querySelector('.loader');

    form.addEventListener('submit', async (event) => {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const reason = document.getElementById('reason').value;
      const date = document.getElementById('date').value;
      const mood = document.getElementById('mood').value;
      const days = document.getElementById('days').value;

      const data = { name, reason, date, days, mood };

      responseContainer.innerHTML = 'Generating your letter....';
      loader.style.display = 'block';

      try {
        const response = await postData('https://us-central1-vacation-gpt.cloudfunctions.net/writeLetter', data);
        loader.style.display = 'none';
        responseContainer.innerHTML = response[0];
      } catch (error) {
        loader.style.display = 'none';
        responseContainer.innerHTML = 'Error: couldn\'t generate your letter.';
      }
    });

    async function postData(url = '', data = {}) {
      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      });

      return response.json();
    }
  </script>
</body>

</html>